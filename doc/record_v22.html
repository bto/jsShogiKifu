<?xml version="1.0" encoding="iso-2022-jp"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">	<head>		<meta http-equiv="content-type" content="text/html;charset=iso-2022-jp" />		<meta name="generator" content="Adobe GoLive" />		<title>CSA標準棋譜ファイル形式 (V2.2)</title>	</head>	<body>		<p align="center">CSA標準棋譜ファイル形式</p>		<p align="right">1991年 3月 8日 原案 柿木 義一<br />1991年 3月 9日 CSAで検討<br />第1版 1991年 5月11日 CSAで検討・決定<br />第3版 1997年 8月25日 CSA理事会で承認<br />%KACHI,%HIKIWAKE を追加<br />第4版 2002年11月15日 CSA理事会で承認<br />バージョン(V2)、棋譜情報を追加<br />第5版 2005年 9月10日 CSA理事会、例会で決定<br />%TIME_UP を追加<br />%ILLEGAL_MOVE を追加<br />V2.1 に<br />第6版 2008年 1月12日 CSA理事会で決定<br />%+ILLEGAL_ACTION を追加<br />%-ILLEGAL_ACTION を追加<br />V2.2 に</p>		<p>1. はじめに</p>		<dl>			<dd>異なる将棋ソフトの間で、棋譜や詰将棋・局面のデータ交換を可能とするために、棋譜ファイルの標準形式を定める。したがってこの形式は、人にとってわかりやすい、ファイルサイズが小さくなる、等を主な目的としていない。</dd>			<dd>各ソフトの棋譜ファイル形式を本仕様にする必要はない。各ソフトの棋譜を本形式に変換するソフトを用意すれば、相互にデータの交換が可能となる。</dd>			<dd>本仕様は、既に定められている以下の規則を基本としている。				<dl>					<dd>(1)「コンピュータ将棋ファイル記述形式」(第1版)、CSA 資料集 Vol.1</dd>					<dd>(2)「通信将棋規約の案」,CSA 資料集 Vol.2</dd>					<dd>(3)「第1回コンピュータ将棋選手権, 通信仕様」, CSA 資料集 Vol.4</dd>				</dl>			</dd>		</dl>		<p>2. 棋譜ファイルの形式</p>		<p>2.1 概要</p>		<dl>			<dd>棋譜ファイルは処理を容易とするため、テキストファイルとする。文字コードと改行コードは、使用するOSや環境に依存する。コメントと棋譜情報(対局者名等)に日本語を使用してもよい。</dd>			<dd>棋譜ファイルは、次のデータから成る。				<dl>					<dd>(1)バージョン</dd>					<dd>(2)棋譜情報</dd>					<dd>(3)開始局面(持駒、手番を含む)</dd>					<dd>(4)指し手と消費時間</dd>					<dd>(5)コメント</dd>				</dl>			</dd>			<dd>コメント以外は、この順番でデータがなければならない。</dd>			<dd>(2)(4)(5)は、省略できる。</dd>			<dd>セパレータ(&quot;/&quot;だけの行)をはさんで、これらデータを繰り返し、複数の棋譜や局面を示すことができる。</dd>		</dl>		<p>2.2 バージョン</p>		<dl>			<dd>&quot;V&quot;で始まり、バージョンの数字を記述する。</dd>			<dd>現バージョンは、				<dl>					<dd>V2.2</dd>				</dl>			</dd>			<dd>とする。</dd>			<dd>バージョンがない場合、1997年8月25日の仕様と判断する。</dd>		</dl>		<p>2.3 棋譜情報</p>		<dl>			<dd>(1) 対局者名				<dl>					<dd>&quot;N+&quot;に続き +側(先手、下手)の対局者名を記述する。</dd>					<dd>&quot;N-&quot;に続き -側(後手、上手)の対局者名を記述する。</dd>					<dd>それぞれ1行とする。</dd>					<dd>省略可能とする。</dd>					<dd>例:</dd>					<dd>N+NAKAHARA</dd>					<dd>N-YONENAGA</dd>				</dl>			</dd>			<dd>(2) 各種棋譜情報				<dl>					<dd>&quot;$&quot;で始め&quot;キーワード&quot;+&quot;:&quot;(データ)の形式とする。</dd>					<dd>これらの棋譜情報は、省略可能とする。</dd>					<dd>(2-1) 棋戦名						<dl>							<dd>$EVENT:(文字列)</dd>						</dl>					</dd>					<dd>(2-2) 対局場所						<dl>							<dd>$SITE:(文字列)</dd>						</dl>					</dd>					<dd>(2-3) 対局開始日時(時刻は省略可)						<dl>							<dd>$START_TIME:YYYY/MM/DD HH:MM:SS</dd>							<dd>&quot;YYYY&quot;は、西暦の年4桁の数字とする。</dd>							<dd>次の&quot;MM&quot;は、月2桁の数字とする。</dd>							<dd>&quot;DD&quot;は、日2桁の数字とする。</dd>							<dd>&quot;HH:MM:SS&quot;は、24時間表現の時間(2桁)、分(2桁)、秒(2桁)とする。</dd>							<dd>&quot;HH:MM:SS&quot;は、省略可能とする。</dd>							<dd>日付と時刻の間のスペースは1桁とする。</dd>							<dd>例:</dd>							<dd>$START_TIME:2002/01/01 19:00:00</dd>							<dd>$START_TIME:2002/01/01</dd>						</dl>					</dd>					<dd>(2-4) 対局終了日時(時刻は省略可)						<dl>							<dd>$END_TIME:YYYY/MM/DD HH:MM:SS</dd>							<dd>開始日時と同様に、対局終了日時を記述する。</dd>						</dl>					</dd>					<dd>(2-5) 持ち時間(持ち時間と秒読み)						<dl>							<dd>$TIME_LIMIT:HH:MM+SS</dd>							<dd>持ち時間+秒読みとする。</dd>							<dd>持ち時間&quot;HH:MM&quot;は、時間(2桁以上の数字)、分(2桁の数字)とする。</dd>							<dd>秒読み&quot;SS&quot;は、秒単位の数字(2桁以上)とする。</dd>							<dd>切れ負けの場合、秒読みを&quot;00&quot;とする。</dd>							<dd>例:</dd>							<dd>$TIME_LIMIT:00:25+00 持ち時間:25分、切れ負け</dd>							<dd>$TIME_LIMIT:00:30+30 持ち時間:30分、秒読み:30秒</dd>							<dd>$TIME_LIMIT:00:00+30 初手から30秒</dd>						</dl>					</dd>					<dd>(2-6) 戦型						<dl>							<dd>$OPENING:(文字列)</dd>						</dl>					</dd>					<dd>(2-7) 補足						<dl>							<dd>&quot;$&quot;で始まる各種棋譜情報の表記順は任意でいい。</dd>						</dl>					</dd>				</dl>			</dd>		</dl>		<p>2.4 駒と位置</p>		<dl>			<dd>駒名:歩から玉まで:FU,KY,KE,GI,KI,KA,HI,OU</dd>			<dd>上の成駒:TO,NY,NK,NG,UM,RY</dd>			<dd>位置:1一を&quot;11&quot;、5一を&quot;51&quot;、9九を&quot;99&quot;というふうに、2桁の数字で表す。</dd>			<dd>駒台は&quot;00&quot;とする。</dd>			<dd>先手(下手)は&quot;+&quot;、後手(上手)は&quot;-&quot;を付ける。</dd>		</dl>		<p>2.5 開始局面</p>		<dl>			<dd>&quot;P&quot;で始まる文字列(以前に決めたもの)。</dd>			<dd>(1) 平手初期配置と駒落ち				<dl>					<dd>平手初期配置は、&quot;PI&quot;とする。駒落ちは、&quot;PI&quot;に続き、落とす駒の位置と種類を必要なだけ記述する。</dd>					<dd>例:二枚落ちPI82HI22KA</dd>				</dl>			</dd>			<dd>(2) 一括表現								<dl>					<dd>1行の駒を以下のように示す。行番号に続き、先後の区別と駒の種類を記述する。</dd>					<dd>先後の区別が&quot;+&quot;&quot;-&quot;以外のとき、駒がないとする。</dd>					<dd>1枡3文字で9枡分記述しないといけない。</dd>					<dd>例:</dd>					<dd>						<pre>P1-KY-KE-GI-KI-OU-KI-GI-KE-KY</pre>					</dd>					<dd>						<pre>P2 * -HI *  *  *  *  * -KA * </pre>					</dd>				</dl>			</dd>			<dd>(3) 駒別単独表現				<dl>					<dd>一つ一つの駒を示すときは、先後の区別に続き、位置と駒の種類を記述する。持駒に限り、駒の種類として&quot;AL&quot;が使用でき、残りの駒すべてを表す。駒台は&quot;00&quot;である。</dd>					<dd>玉は、駒台へはいかない。</dd>					<dd>例:</dd>					<dd>P-22KA</dd>					<dd>P+99KY89KE</dd>					<dd>P+00KIOOFU</dd>					<dd>P-00AL</dd>				</dl>			</dd>			<dd>(4) 手番				<dl>					<dd>&quot;+&quot;で+側(先手、下手)を、&quot;-&quot;で-側(後手、上手)の手番を示す。1行とする。</dd>					<dd>手番の指定は必要である。</dd>				</dl>			</dd>			<dd>(5) 補足				<dl>					<dd>初期状態はすべての駒が駒箱にあり、上記(2)(3)の指定は、駒を駒箱から盤上に移動する動作を表現する。したがって、以上の(1)から(3)の指定で位置が決まらないものは、駒箱にあるとする。また、盤面の指定が無いときは、盤上に何も無いとする。</dd>					<dd>上記(1)と(2)は同時に指定しない。</dd>					<dd>&quot;P+00AL&quot;、&quot;P-00AL&quot;は、最後に指定しなければならない。</dd>					<dd>手番は、盤面データの後に指定する。</dd>				</dl>			</dd>		</dl>		<p>2.6 指し手と消費時間</p>		<dl>			<dd>1手の指し手を1行とし、次の行にその指し手で消費した時間を示す。</dd>			<dd>(1) 通常の指し手				<dl>					<dd>先後(&quot;+&quot;、または&quot;-&quot;)の後、移動前、移動後の位置、移動後の駒名、で表す。</dd>					<dd>例:</dd>					<dd>+3324NG ▲2四銀成</dd>				</dl>			</dd>			<dd>(2) 特殊な指し手、終局状況				<dl>					<dd>%で始まる。</dd>					<dd>%TORYO 投了</dd>					<dd>%CHUDAN 中断</dd>					<dd>%SENNICHITE 千日手</dd>					<dd>%TIME_UP 手番側が時間切れで負け</dd>					<dd>%ILLEGAL_MOVE 手番側の反則負け、反則の内容はコメントで記録する</dd>					<dd>%+ILLEGAL_ACTION 先手(下手)の反則行為により、後手(上手)の勝ち</dd>					<dd>%-ILLEGAL_ACTION 後手(上手)の反則行為により、先手(下手)の勝ち</dd>					<dd>%JISHOGI 持将棋</dd>					<dd>%KACHI (入玉で)勝ちの宣言</dd>					<dd>%HIKIWAKE (入玉で)引き分けの宣言</dd>					<dd>%MATTA 待った</dd>					<dd>%TSUMI 詰み</dd>					<dd>%FUZUMI 不詰</dd>					<dd>%ERROR エラー</dd>					<dd>※文字列は、空白を含まない。</dd>					<dd>※%KACHI,%HIKIWAKE は、コンピュータ将棋選手権のルールに対応し、</dd>					<dd>第3版で追加。</dd>					<dd>※%+ILLEGAL_ACTION,%-ILLEGAL_ACTIONは、手番側の勝ちを表現できる。</dd>				</dl>			</dd>			<dd>(3) 消費時間				<dl>					<dd>&quot;T&quot;に続き、その指し手で消費した時間を秒単位で示す。1秒未満は、切り捨てる。</dd>					<dd>消費時間は省略可能とする。</dd>					<dd>例:</dd>					<dd>T10</dd>				</dl>			</dd>		</dl>		<p>2.7 コメント</p>		<dl>			<dd>&quot;'&quot;(アポストロフィー)で始まる行は、ソフトが読み飛ばすコメントとする。</dd>			<dd>文の途中からのコメントは、記述できない。</dd>		</dl>		<p>2.8 マルチステートメント</p>		<dl>			<dd>&quot;,&quot;(カンマ)を用いて、複数の行を1行にまとめることができる。</dd>		</dl>		<p>2.9 ファイル名の拡張子(&quot;.&quot;以降の名前)</p>		<dl>			<dd>&quot;csa&quot;とする。unixのように大文字小文字の区別がある場合は小文字とする。</dd>		</dl>		<p>3. 棋譜ファイルの例</p><pre>'----------棋譜ファイルの例&quot;example.csa&quot;-----------------'バージョンV2.2'対局者名N+NAKAHARAN-YONENAGA'棋譜情報'棋戦名$EVENT:13th World Computer Shogi Championship'対局場所$SITE:KAZUSA ARC'開始日時$START_TIME:2003/05/03 10:30:00'終了日時$END_TIME:2003/05/03 11:11:05'持ち時間:25分、切れ負け$TIME_LIMIT:00:25+00'戦型:矢倉$OPENING:YAGURA'平手の局面P1-KY-KE-GI-KI-OU-KI-GI-KE-KYP2 * -HI *  *  *  *  * -KA * P3-FU-FU-FU-FU-FU-FU-FU-FU-FUP4 *  *  *  *  *  *  *  *  * P5 *  *  *  *  *  *  *  *  * P6 *  *  *  *  *  *  *  *  * P7+FU+FU+FU+FU+FU+FU+FU+FU+FUP8 * +KA *  *  *  *  * +HI * P9+KY+KE+GI+KI+OU+KI+GI+KE+KY'先手番+'指し手と消費時間+2726FUT12-3334FUT6%CHUDAN'---------------------------------------------------------</pre><script type="text/javascript">var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));</script><script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-3551005-4");pageTracker._trackPageview();} catch(err) {}</script>	</body></html>